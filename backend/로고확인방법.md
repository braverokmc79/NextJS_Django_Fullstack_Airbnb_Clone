## ✅ 1. 로그 확인 방법 (Docker Compose)

### 📌 웹 서비스 로그 보기

```bash
docker compose -f docker-compose.real.yml logs web
```

### 📌 Daphne 로그 보기

```bash
docker compose -f docker-compose.real.yml logs daphne
```

> 오류 메시지, 퍼미션 문제, 경로 문제 등이 출력될 수 있습니다.

---

## ✅ 2. 우선 확인할 체크리스트

### ✅ (1) 파일 업로드 경로 확인

Django에서 업로드되는 파일은 `MEDIA_ROOT`에 저장되며, URL 경로는 `MEDIA_URL`로 접근합니다.

#### 예시 (`settings.py`):

```python
MEDIA_URL = '/media/'
MEDIA_ROOT = os.path.join(BASE_DIR, 'media')
```

> 위 설정이 있는지 확인하세요.

---

### ✅ (2) Gunicorn은 정적/미디어 파일을 직접 서빙하지 않음

운영 환경에서는 **Nginx가 반드시 정적/미디어 파일을 `proxy_pass` 혹은 `alias`로 서빙해야** 합니다.

현재 설정에는 Nginx가 포함되어 있지 않으므로, 아래 중 하나를 선택해야 합니다:

🛠 **해결책:**

* Nginx를 추가해서 `/media/` 요청을 `media_volume`에 연결
* 또는, 개발 시처럼 Django가 `media` 파일을 직접 서빙하도록 `urls.py`에 설정 (**운영에서는 비추천**)

---

### ✅ (3) 개발용 테스트: Django가 직접 미디어 파일 서빙

```python
# urls.py
from django.conf import settings
from django.conf.urls.static import static

urlpatterns = [
    # ... your urls
] + static(settings.MEDIA_URL, document_root=settings.MEDIA_ROOT)
```

> 운영에서는 성능/보안 문제로 이 방식은 사용하지 않습니다. 반드시 Nginx를 사용하세요.

---

## ✅ 3. 업로드 안 되는 상황 예시별 진단

| 증상                        | 확인 방법                                                   |
| ------------------------- | ------------------------------------------------------- |
| 업로드 요청은 보내지나 응답이 500      | `docker compose logs web` 확인                            |
| 업로드 요청은 성공하나 이미지가 안 보임    | 이미지 접근 URL이 `/media/파일이름`인지 확인, 브라우저 네트워크 탭에서 404 여부 확인 |
| 권한 오류 (Permission denied) | `media` 디렉토리 퍼미션 확인 (`ls -l media/`), 컨테이너 내부 권한도 확인    |

---

## ✅ 4. Nginx를 통해 media 서빙하는 방법 (추가 필요시)

운영 환경에서 적절한 정적/미디어 파일 처리를 위해 Nginx를 사용하는 것이 표준입니다.
